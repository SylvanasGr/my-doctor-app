<div class="tab-pane fade in show active" id="patients">
    <table class="table table-bordered">
        <thead class="thead-light">
            <tr>
                <th>Full Name</th>
                <th>Tax Number</th>
                <th>Social Security Number</th>
                <th>Phone Number</th>
	            <th>Date</th>
                <th>Total Amount</th>
            </tr>
        </thead>
        <tbody>
            <!-- Loop through the list of payments -->
            <tr th:each="payment : ${paymentsList}">
                <td th:text="${payment.fullName}"></td>
                <td th:text="${payment.taxNumber}"></td>
                <td th:text="${payment.socialSecurityNumber}"></td>
                <td th:text="${payment.phoneNumber}"></td>
                <td th:text="${payment.date}"></td>
                <td th:text="${payment.totalAmount}"></td>
            </tr>
        </tbody>
    </table>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
	    // You may include additional JavaScript logic if needed
	    document.getElementById('paymentsTab').addEventListener('click', () => {
		    fetch('payments/getPayments')
				    .then(res => res.json())
				    .then(data => {
					    updatePaymentsTab(data)
				    }).catch(err => {
			    console.log("Error fetching payments: ", err);
		    });
	    });

	    var updatePaymentsTab = (paymentsList) => {
		    const paymentsTabContent = document.getElementById('payments');

		    paymentsTabContent.innerHTML = '';

		    const table = document.createElement('table');
		    table.className = 'table table-bordered';
		    paymentsList.forEach(payment => {
			    const row = table.insertRow();
			    row.innerHTML = `
                    <td>${payment.fullName}</td>
                    <td>${payment.taxNumber}</td>
                    <td>${payment.socialSecurityNumber}</td>
                    <td>${payment.phoneNumber}</td>
                    <td>${payment.date}</td>
                    <td>${payment.totalAmount}</td>
                `;
		    });

		    paymentsTabContent.appendChild(table);

	    }

    });
</script>
